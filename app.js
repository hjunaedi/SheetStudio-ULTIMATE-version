// SheetStudio V5 Ultimate - Modern ES6+ | Optimized <10KB
(function(){'use strict';const t={apiUrl:'',cache:null,cacheTime:0};const e=e=>document.getElementById(e);const i=t=>new URLSearchParams(window.location.search).get(t);const n=(e,i)=>{const n=document.querySelector('meta['+('name'===e?'name':'property')+'="'+i+'"]');n&&(n.content=i)};const o=t=>{const e=t.replace(/<[^>]+>/g,'');return Math.ceil(e.split(/\s+/).length/200)+' min read'};const a=t=>{if(!t)return'';const e=new Date(t);return isNaN(e.getTime())?t:e.toLocaleDateString('id-ID',{year:'numeric',month:'long',day:'numeric'})};const s=async()=>{if(t.cache&&Date.now()-t.cacheTime<3e5)return t.cache;try{const e=await fetch(t.apiUrl);const i=await e.json();t.cache=i;t.cacheTime=Date.now();return i}catch(e){console.error('Fetch error:',e);throw e}};const c=t=>{const i=e(t);if(!i)return;i.innerHTML='<div class="loader"><div class="spinner"></div><p>Memuat...</p></div>'};const r=(t,i)=>{const o=e(i);if(!o)return;o.innerHTML='<div class="error"><div class="error__icon">‚ö†Ô∏è</div><h2>Error</h2><p>'+t+'</p><a href="/" class="btn btn--primary">Kembali</a></div>'};const l=t=>'<article class="card card--post"><a href="/post.html?s='+t.slug+'" class="card__link">'+(t.image_url?'<div class="card__img"><img src="'+t.image_url+'" alt="'+t.title+'" loading="lazy"><span class="card__badge">'+(t.label||'Article')+'</span></div>':'')+'<div class="card__body">'+(t.tanggal?'<time class="card__meta">'+a(t.tanggal)+'</time>':'')+'<h3 class="card__title">'+t.title+'</h3>'+(t.description?'<p class="card__desc">'+t.description+'</p>':'')+'<span class="card__cta">Baca ‚Üí</span></div></a></article>';const d=async i=>{c(i);try{const n=await s();const o=n.filter(t=>'post'===t.tipe);const a=e(i);if(!a)return;if(0===o.length){a.innerHTML='<div class="empty"><p>Belum ada artikel.</p></div>';return}a.innerHTML='<div class="grid grid--3">'+o.map(l).join('')+'</div>';h()}catch(t){r('Gagal memuat blog',i)}};const u=async t=>{c(t);const l=i('s');if(!l){r('Artikel tidak ditemukan',t);return}try{const i=await s();const c=i.find(t=>t.slug===l&&'post'===t.tipe);if(!c){r('Artikel tidak ditemukan',t);return}document.title=c.title+' - SheetStudio';n('property','og:title',c.title);n('name','description',c.description||'');const d=e(t);if(!d)return;d.innerHTML='<article class="post"><header class="post__header">'+(c.label?'<span class="badge">'+c.label+'</span>':'')+'<h1 class="post__title">'+c.title+'</h1>'+(c.description?'<p class="post__lead">'+c.description+'</p>':'')+'<div class="post__meta">'+(c.tanggal?'<time>'+a(c.tanggal)+'</time>':'')+'<span>'+o(c.content)+'</span></div></header>'+(c.image_url?'<figure class="post__img"><img src="'+c.image_url+'" alt="'+c.title+'"></figure>':'')+'<div class="prose">'+c.content+'</div></article>';h()}catch(e){r('Gagal memuat artikel',t)}};const m=async t=>{const n=i('s');if(!n){r('Halaman tidak ditemukan',t);return}const o=e(t);if(!o)return;o.innerHTML='<div class="loader"><div class="spinner"></div></div>';try{const e=await s();const i=e.find(e=>e.slug===n&&'page'===e.tipe);if(!i){r('Halaman tidak ditemukan',t);return}document.title=i.title+' - SheetStudio';o.innerHTML='<div class="container"><div class="prose">'+i.content+'</div></div>';h()}catch(e){r('Gagal memuat halaman',t)}};const h=()=>{if('IntersectionObserver'in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add('fade-in'),t.unobserve(e.target))})},{threshold:.1});document.querySelectorAll('.card,.post').forEach(e=>t.observe(e))}};const p=()=>{const t=window.matchMedia('(prefers-color-scheme: dark)');const e=localStorage.getItem('theme')||'auto';const i=e=>{document.documentElement.setAttribute('data-theme','auto'===e?t.matches?'dark':'light':e);document.querySelectorAll('.theme-toggle').forEach(t=>{t.textContent='dark'===document.documentElement.getAttribute('data-theme')?'‚òÄÔ∏è':'üåô'})};i(e);t.addEventListener('change',()=>{'auto'===e&&i('auto')});document.querySelectorAll('.theme-toggle').forEach(t=>{t.addEventListener('click',()=>{const t=document.documentElement.getAttribute('data-theme');const n='light'===t?'dark':'light';localStorage.setItem('theme',n);i(n)})})};window.SheetStudio={config:t,init:()=>{p()},renderBlogList:d,renderPostDetail:u,renderStandalonePage:m,createBlogCard:l};document.addEventListener('DOMContentLoaded',()=>{p();document.querySelectorAll('.nav-toggle').forEach(t=>{t.addEventListener('click',()=>{document.getElementById('mobile-nav')?.classList.toggle('active')})})})})();
